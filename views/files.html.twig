{% extends 'layout.html.twig' %}
{% use 'header.html.twig' %}    

{% block page_title %}My files{% endblock %}

{% block content %}

{% if user['username'] is defined %}

<table>
    {% for item in directory %}
        <tr>
            <td><i class="fas fa-{{ item['type'] }}"></i></td>
            {% if item['type'] == 'folder' %}

                {% if item['name'] == '..' %}

                <td><a href="?action=files&amp;dir={{ lowerlevel }}">{{ item['name'] }}</a></td>
                
                {% else %}

                <td><a href="?action=files&amp;dir={{ currentdir }}/{{ item['name'] }}">{{ item['name'] }}</a></td>                
                
                {% endif %}

            {% else %}

            <td>{{ item['name'] }}</td>

            {% endif %}

            <td>{{ item['modified_last'] }}</td>

            {% if item['type'] == 'file' %}

            <td><a href="?action=download&amp;file={{ currentdir }}/{{ item['name'] }}"><i class="fas fa-download"></i></a></td>
            <td><a href="?action=delete&amp;dir={{ currentdir }}&amp;file={{ currentdir }}/{{ item['name'] }}"><i class="fas fa-trash"></i></a></td>
            
            {% else %}

            <td></td>
                {% if item['name'] != '..' %} 
                <td><a href="?action=deleteDir&amp;dir={{ currentdir }}/{{ item['name'] }}"><i class="fas fa-trash"></i></a></td>
                {% endif %}
            {% endif %}
        </tr>
    {% endfor %}
    {% if error != "" %}
    <tr>
        <td><i class="fas fa-times"></i></td>
        <td>{{ error }} </td>
    </tr>
    {% endif %}
</table>

{% else %}

<div class="warning">Login to see your files</div>

{% endif %}

{% endblock %}